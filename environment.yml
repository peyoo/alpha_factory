name: alpha_factory_env
channels:
  - conda-forge
  - defaults

dependencies:
  - python=3.11
  - pip
  # Conda-provisioned binary packages (kept conservative for solver)
  - numpy=1.24.*
  - scipy=1.17.*
  - ta-lib
  - cvxpy
  - pyarrow=14.0.*
  - sympy=1.14.*
  - pydantic=2.11.*
  - pandas=2.0.*

  # Use pip to install the rest inside the conda env (moved heavy binaries here if needed)
  - pip:
    - polars>=0.20.0
    - pydantic-settings>=2.0.0
    - loguru>=0.7.0
    - polars-ta>=0.1.0
    - tushare>=1.2.89
    - deap>=1.4.0
    - tensorboardx~=2.6.4
    - quantstats~=0.0.81
    - pre-commit>=3.5.0
    - ruff>=0.1.0
    - scikit-learn>=1.3.0
    - fastcluster>=1.3.0
    - lightgbm>=4.0.0

# Notes:
# - After dynamic probe, we may move more packages from pip: to top-level conda deps if
#   binary wheels are not available or if conda builds are preferred.
# - To use this env locally:
#     conda create -n alpha_factory_env -f environment.yml
#     conda activate alpha_factory_env
#   Then configure Poetry to install into the active conda env:
#     poetry config virtualenvs.create false --local
#     poetry install --no-root
